generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

model User {
  id        String           @id @unique @default(cuid())
  clerkId   String           @unique
  personal  UserPersonal
  contact   UserContact
  legal     UserLegal
  role      Role
  documents Document[]
}

model UserPersonal {
  user         User      @relation(fields: [userId], references: [id])
  userId       String    @unique

  id           String    @id @unique @default(cuid())
  title        String?
  firstName    String
  middleName   String?
  lastName     String
  birthDate    DateTime
  birthPlace   String
  birthCountry String
  citizenship  String[]
  motherName   String
  gender       Gender
}

model UserContact {
  id           String  @id @unique @default(cuid())
  email String @unique
  phone String @unique
}

model UserLegal {
  id           String  @id @unique @default(cuid())
  legalRelationshipType LegalRelationshipType
  contractType          ContractType
}

model Document {
  id          String       @id @unique @default(cuid())
  hash        String       @unique
  description String?
  owner       User         @relation(fields: [ownerId], references: [id])
  ownerId     String       @unique
  type        DocumentType
  uploadedAt  DateTime
  expireAt    DateTime?
}

enum Role {
  ADMIN
  MANAGER
  EMPLOYEE
}

enum Gender {
  Male
  Female
  Other
}

enum DocumentType {
  IMAGE
  DOCUMENT
}

enum LegalRelationshipType {
  FULLTIME
  PARTTIME
}

enum ContractType {
  FIXED_TERM
  INDEFINITE_TERM
}